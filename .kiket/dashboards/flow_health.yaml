model_version: "1.0"
dashboard:
  id: flow-health
  name: Flow Health
  description: Visualise throughput and active work for kanban teams.
  widgets:
    - id: throughput-trend
      type: timeseries
      title: Throughput (Issues Completed)
      query: fct_throughput
      query_config:
        model: fct_throughput
        parameters:
          - name: project_id
            type: integer
            required: true
        filters:
          project_id: ":project_id"
        order_by:
          - completed_on
      visualization:
        x: completed_on
        y: issues_completed
        series: project_id
    - id: cycle-time-alert
      type: timeseries
      title: Average Cycle Time
      query: fct_cycle_time
      query_config:
        model: fct_cycle_time
        parameters:
          - name: project_id
            type: integer
            required: true
        filters:
          project_id: ":project_id"
        order_by:
          - completed_on
      visualization:
        x: completed_on
        y: avg_cycle_days
  alerts:
    - query: fct_cycle_time
      query_config:
        model: fct_cycle_time
        parameters:
          - name: project_id
            type: integer
            required: true
        filters:
          project_id: ":project_id"
      condition: avg_cycle_days > 4
      notify_roles:
        - manager
